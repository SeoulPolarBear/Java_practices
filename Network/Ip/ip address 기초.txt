OSI 7 layer

1계층 : 물리 계층 (허브)
2계층 : 데이터링크 계층(MAC)
3계층 : 네트워크 계층(IP, 장비 : 라우터)
4계층 : 전송계층(TCP/UDP 게이트웨이 사용, port번호 전송)
5계층 : 세션계층(port를 통해서 필요한 어플리케이션으로 접속)
6계층 : 표현계층(세션계층으로 보내기전 통신을 할 수 있는 형태로 변환 혹은 응용계층에서 사용할 수 있는 data로 변환)
7계층 : 응용계층(실제사용하는 부분)

2계층 : 물리주소 (Mac 주소)
3계층 : 논리주소 (IPv4, IPv6)
4계층 : 포트주소 (Port 주소)

물리주소 : 48bit(24bit     -      24bit)
	         제조사별 ID   제품일련번호

전송주소 : IPv4 address : 32bit 

00000000    .00000000.00000000.00000000 32bit
0~255(256ea)

0.0.0.0 ~ 255.255.255.255  전체 IP 주소 갯수는 2^32 약 43억

주소가 너무 많다보니 관리를 해야할 필요성을 느끼게 되었다.
-----------------------------------------------------------------------------------------------------
=>classfull address 개념

A,B,C,D,E 5개의 클래스로 구분

IP 주소 체계의 방식 네트워크 주소 + 호스트 주소
------------------------------------------------------------------------------------------------------------------------------------------------------------
IP 주소로 사용하지 않는 주소
클래스   클래스구분법   범위     실제적인주소                  네트워크(0):호스트(x)
A        0XXXXXXX       0~127    0.0.0.0 ~ 127.255.255.255     0XXX(0.x.x.x 이 때 다른 네트워크끼리 하기위해서 0이 같아야 한다.)
-0.xxx.xxx.xxx(전체를 기준으로 사용하는 네트워크이므로 사용하지 않는다. 모든 네트워크를 나타내는 와일드 카드로 사용)
-127.xxx.xxx.xxx(루프백으로 사용해야 하므로 ip주소로 사용하지 않는다. 자신을 나타내는 주소)
-10.0.0.0 ~ 10.255.255.255 => 사설 IP 주소 구간

B        10XXXXXX       128~191  128.0.0.0 ~ 191.255.255.255   00XX(0.0.x.x 이 때 다른 네트워크끼리 하기위해서 0.0이 같아야 한다.)
171.16.0.0 ~ 171.31.255.255 => 사설 IP 주소 구간
C        110XXXXX       192~223  192.0.0.0 ~ 223.255.255.255   000X(0.0.0.x 이 때 다른 네트워크끼리 하기위해서 0.0.0이 같아야 한다.)
ex) virtual box 주소 : 192.168.56.101 pc 본체 주소 : 192.168.56.1
192.168.0.0 ~ 192.168.255.255 => 사설 IP 주소 구간

사용하지 않음(예비로 사용하기 위해서)
D        1110XXXX       224~239  224.0.0.0 ~ 239.255.255.255   - => 멀티캐스트용으로 사용
E        1111XXXX       240~255  240.0.0.0 ~ 255.255.255.255   - => 연구목적으로 사용
255.255.255.255 => 전체 네트워크에 대한 브로드캐스트 주소로 사용
---------------------------------------------------------------------------------------------------------------------------------------------------------------
호스트 주소 => 컴퓨터를 포함한 장비에 부여할 수 있는 주소
호스트 주소로 사용가능한 주소
네트워크 구간에서 처음 주소와 마지막 주소를 제외한 주소들

한 네트워크의 호스트 주소는 클래스 별로 틀리다.

서브넷 이라는 개념을 이해해야 함.
default subnetmask
                   2진수                                                     십진수(netmask)  prefix
A클래스 0XXX   -   11111111.00000000.00000000.00000000  255.0.0.0             /8
B클래스 00XX   -   11111111.11111111.00000000.00000000  255.255.0.0          /16
C클래스 000X   -   11111111.11111111.11111111.0000000   255.255.255.0       /24

ipconfig를 통해서 확인할 수  있다.
broadcast : 지금 ip에서 최대로 사용할 수 있는지를 확인할 수 있다.
ex)192.168.56.255

(115.94.194.35)
낫트
사슬 ip


호스트의 주소 갯수 2^32-default prefix  - 2

한 네트워크의 전체 IP 주소 중에서 항상 -2를 적용한 것이 호스트 주소

ex)

네트워크 주소(네트워크 구간을 나타내는 네트워크 주소)

1.0.0.0 네트워크
A
네트워크의 범위 - 1.0.0.0 ~ 1.255.255.255  
네트워크 주소 : 1.0.0.0 /8
브로드캐스트 주소 : 1.255.255.255
호스트 갯수 : 2^(32-8)-2 = 2^24 -2

129.0.0.0 네트워크
B
네트워크의 범위  - 129.0.0.0 ~ 129.0.255.255
네트워크 주소 : 129.0.0.0 /16
브로드캐스트 주소 : 129.0.255.255
호스트 갯수 : 2^(32-16)-2 = 2^16 -2

192.168.10.0 네트워크
C
네트워크의 범위  - 192.168.10.0 ~ 192.168.10.255
네트워크 주소 : 192.168.10.0 /24(네트워크를 사용할 수 있게 해주는 ip 주소)
브로트캐스트 주소 : 192.168.10.255(data정보를 보내기위한 ip 주소)
호스크 갯수 : 2^(32-24)-2 = 2^8 -2 = 256-2 = 254

171.45.0.0/16

네트워크 구간 : 171.45.0.0 ~ 171.45.255.255
네트워크 주소 : 171.45.0.0
브로드캐스트 주소 : 171.45.255.255

200.30.45.0/24

네트워크 구간 : 200.30.45.0 ~ 200.30.45.255
네트워크 주소 : 200.30.45.0
브로드캐스트 주소 : 200.30.45.255
-------------------------------------------------------------------------------------------------------------------------------------------------------
예) 1000명 회사 -부서 200명씩 있는 회사(부서끼리 네트워크가 연동 되면 안된다. => 보안 취약점)
B클래스 /6
32 -16 =16
2^16-2 => 65536-2 = 65534  (1000명에 비해 낭비가 심하다.)

classfull address  단점 : IP 주소에 대해서 조절을 할 수 없다는 점 이런 단점을 극복하기 위해서 나오게 된것이
=> 서브넷팅(서브넷팅 + 슈퍼넷팅) : 기존의 네트워크를 상황에 맞게 쪼개거나 서로 다른 네트워크를 합쳐서 사용하는 것
즉, classless address(클래스의 개념이 없어짐)

서브네팅 실행시 네트워크 개수 : 2^(prefix - 클래스별 prefix)
(서브넷팅도 네트워크 이므로 네트워크 주소와 브로드캐스트 주소를 제외해야한다. 따라서 2^(prefix - 클래스별 prefix)-2를 해야 한다.
따라서 c클래스의 경우 서브넷 개수가 2개(25), 4개(26), 8개(27), 16개(28), 32개(29), 64개(30), 128개(31) 256개(32)
 호스트 개수는 : 256/128(31)-2 = 0   256/256(32) -2 =-1 이므로 64개로 쪼갤 때부터 호스트 번호를 사용할 수 있다.)

xxx	.	xxx	.	xxx	.	xxx
8로	8           9-15	16	17-23	24         25-32
고정

192.168.0.0/24
1111111.11111111.11111111.00000000
192.168.0.0 ~ 192.168.0.255

192.168.0.0/25(1이 25개)
11111111.11111111.11111111.10000000
192.168.0.0 ~ 192.168.0.127
192.168.0.128 ~ 192.168.0.255

192.168.0.0/26
11111111.11111111.11111111.11000000
192.168.0.0 ~ 192.168.0.63
192.168.0.64 ~ 192.168.0.127
192.168.0.128 ~ 192.168.0.191
192.168.0.192 ~ 192.168.0.255

172.0.0.0/17
11111111.11111111.10000000.00000000
172.0.0.0~172.0.127.255
172.0.128.0~172.0.128.255

172.0.0.0/18
11111111.11111111.11000000.00000000
172.0.0.0~172.0.63.255
172.0.64.0~172.0.127.255
172.0.128.0~172.0.191.255
172.0.192.0~172.0.255.255

0~63
64~127
128~191
192~255

172.0.0.0/24 (B클래스일 경우)
172.0.0.0~172.0.0.255
172.0.1.0~172.0.1.255
172.0.2.0~172.0.2.255
...
172.0.255.0~172.0.255.255


서브넷팅 : 네트워크를 쪼갬
슈퍼넷팅 : 네트워크를 합침

서브넷팅은 prefix를 이용해서 함.

﻿host 갯수

2^(32-prefix)-2

network 갯수

2^(prefix-default prefix)

network 구간

256/2^(prefix-default prefix)

         XXX  .  XXX   .   XXX    .    XXX
prefix   0-7  8  9-15  16  17-23  24   25-32

default
prefix         8           16           24

서브넷팅
42.0.0.0/14
256/2^(14 -8) = 4 네트워크 구간은 4씩 올라간다.
42.0.0.0 ~ 42.3.255.255
    4            7
    8            11
    12           15
 (64개) ...
    252         255


-------------------------------------------------------------------------
192.168.56.103/23
192.168.0.0/23

2^(23-16) = 2^7 = 128
256/128 = 2

192.168.0.0 ~ 192.168.1.255
       2
       4
       ...

      56                   57
       ....

/20 => 4096-2
/21 => 2048-2
/22 => 1024-2
/23 => 512-2
/24 => 256-2
/25 => 128-2
/26 => 64-2
/27 => 32-2
/28 => 16-2
/29 => 8-2
/30 => 4-2
/31 => 2-2

192.168.56.103/23를 사용하려면 /23 => 2-2(2구간 마다 변경 기준 prefix : 16)
그래서 192.168.56.0.0 ~ 192.168.57.255
슈퍼 넷팅
(192.168.56.0.3 /23 => 192.168.56.0/24 + 192.168.57.0 /24)


------------------------------------------
VLSM(가변 길이 서브넷팅)
B class 172.30.0.0/16
2000명 그룹 2개   /21
1000명 그룹 3개  /22
500명 그룹 2개   /23
200명 그룹 4개  /24

2000명 그룹 2개 ----------------------------
2^(21 -16) =2^5 = 32
256/32 = 8
172.30.0.0 ~ 172.30.7.255
172.30.8.0 ~ 172.30.15.255

1000명 그룹 3개--------------------------------
2^(22-16) = 2^6 = 64
256/64 = 4

172.30.16.0 ~ 172.30.19.255 => 2
172.30.20.0 ~ 172.30.23.255
172.30.24.0 ~ 172.30.27.255

500명 그룹 2개-----------------------------------
2^(23-16) = 2^7 = 128
256/128 = 2
172.30.28.0 ~ 172.30.29.255
172.30.30.0 ~ 172.30.31.255

200명 그룹 4개 --------------------------------------
172.30.32.0 ~ 172.30.32.255
172.30.33.0 ~ 172.30.33.255
172.30.34.0 ~ 172.30.34.255
172.30.35.0 ~ 172.30.35.255

2000명을 추가 했을 시---------------------------------
172.30.8.0 ~ 172.30.15.255
         16             23
         24             31
         32             39( 16~ 32 까지는 이미 다른 그룹에서 사용하고 있기 때문에)

172.30.40.0 ~ 172.30.47.255을 추가해준다.
-----------------------------------------------------------------
120.0.0.0 /8 => /25

2^(25-24) = 2^1 = 2
256/2 = 128
120.0.0.0 ~ 128.0.0.127
120.0.0.128 ~ 120.0.0.255

120.0.1.0 ~ 128.0.1.127
120.0.1.128 ~ 120.0.1.255

120.0.2.0 ~ 128.0.2.127
120.0.2.128 ~ 120.0.2.255
...

120.0.255.0 ~ 128.0.255.127
120.0.255.128 ~ 120.0.255.255

120.1.0.0 ~ 128.1.0.127
120.1.0.128 ~ 120.1.0.255

120.1.1.0 ~ 128.1.1.127
120.1.1.128 ~ 120.1.1.255

120.1.2.0 ~ 128.0.2.127
120.1.2.128 ~ 120.1.2.255
...

120.1.255.0 ~ 128.1.255.127
120.1.255.128 ~ 120.1.255.255
...
120.255.255.0 ~ 128.255.255.127
120.255.255.128 ~ 120.255.255.255
--------------------------------------------------------------

170.20.0.0 /16  => 170.20.0.0 /18

256/2^(18-16)=256/2^2=256/4=64

170.20.0.0 ~ 170.20.63.255
170.20.64.0 ~ 170.20.127.255
170.20.128.0 ~ 170.20.191.255
170.20.192.0 ~ 170.20.255.255

170.20.0.0 /16  => 170.20.0.0 /26

네트워크 갯수
2^(26-16)=2^10=1024
네트워크 구간
256/2^(26-24)=256/2^2=64

170.20.0.0 ~ 170.20.0.63
170.20.0.64 ~ 170.20.0.127
170.20.0.128 ~ 170.20.0.191
170.20.0.192 ~ 170.20.0.255

170.20.1.0 ~ 170.20.1.63
.
.

170.20.2.0 ~ 170.20.2.63
.
.

170.20.255.0 ~ 170.20.255.63
.
.


슈퍼넷팅

192.168.30.0 /24  => 192.168.30.0 /23

256/2^(23-16)=256/2^7=256/128=2

192.168.0.0 ~ 192.168.1.255
        2
        4
        6
        .
        .
192.168.30.0 ~ 192.168.31.255 => 192.168.30.0 /23

















